#!/bin/sh

commit_msg_file=$1
commit_msg=$(cat "$commit_msg_file")

valid_types="Added|Changed|Deprecated|Removed|Fixed|Security|Add|Chg|Dep|Rm|Fix|Sec"

if ! echo "$commit_msg" | grep -Eq "^($valid_types): "; then
  echo "Error: Commit message must start with one of the valid types followed by a colon and space."
  echo "   Valid: Added, Changed, Deprecated, Removed, Fixed, Security"
  echo "   Short: Add, Chg, Dep, Rm, Fix, Sec"
  echo "   Example: Added: Implement login system"
  exit 1
fi

message_text=$(echo "$commit_msg" | sed -E "s/^($valid_types): //")

if [ ${#message_text} -lt 15 ]; then
  echo "Error: Message must be at least 15 characters after the type."
  exit 1
fi

exit 0
